{% load static %}
{% load custom_filters %}
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Admin Dashboard</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<script>
		tailwind.config = {
			darkMode: 'class',
			theme: {
				extend: {
					colors: {
						primary: {
							50: '#eff6ff',
							500: '#3b82f6',
							600: '#2563eb',
							700: '#1d4ed8',
						}
					}
				}
			}
		}
	</script>
	<style>
		.sidebar-transition {
			transition: all 0.3s ease;
		}

		.content-transition {
			transition: all 0.3s ease;
		}

		.active-nav-item {
			background-color: rgba(59, 130, 246, 0.1);
			border-right: 3px solid #3b82f6;
			color: #3b82f6;
		}
	</style>
</head>

<body class="bg-gray-100">
	<div class="flex h-screen">
		<!-- Sidebar -->
		<div class="sidebar-transition w-64 bg-gray-900 text-white flex flex-col">
			<!-- Logo -->
			<div class="p-6 border-b border-gray-700">
				<h1 class="text-xl font-bold flex items-center">
					<i class="fas fa-cube mr-2 text-blue-500"></i>
					MOIST<span class="text-blue-500"> &nbsp;INC</span>
				</h1>
			</div>

			<!-- User Profile -->
			<div class="p-4 border-b border-gray-700 flex items-center space-x-3">
				<div class="h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center">
					<span class="font-bold">RC</span>
				</div>
				<div>
					<p class="font-medium">Rene M. Cabuhan II</p>
					<p class="text-xs text-gray-400">Administrator</p>
				</div>
			</div>

			<!-- Navigation -->
			<div class="flex-1 overflow-y-auto py-4">
				<ul class="space-y-1 px-3">
					<a href="#" class="flex items-center p-3 rounded-lg hover:bg-gray-800
   {% if request.resolver_match.url_name == 'dashboard' %} bg-gray-800 text-white {% endif %}">
						<i class="fas fa-tachometer-alt mr-3"></i>
						<span>Dashboard</span>
					</a>

					<a href="#" class="flex items-center p-3 rounded-lg hover:bg-gray-800 
   {% if request.resolver_match.url_name == 'transactions' %} bg-gray-800 text-white {% endif %}">
						<i class="fas fa-tachometer-alt mr-3"></i>
						<span>Transactions</span>
					</a>

					<a href="#" class="flex items-center p-3 rounded-lg hover:bg-gray-800
   {% if request.resolver_match.url_name == 'collections' %} bg-gray-800 text-white {% endif %}">
						<i class="fas fa-folder mr-3"></i>
						<span>Collections</span>
					</a>

					<a href="{% url 'book_list' %}" class="flex items-center p-3 rounded-lg hover:bg-gray-800
   {% if request.resolver_match.url_name == 'book_list' %} active-nav-item {% endif %}">
						<i class="fas fa-book mr-3"></i>
						<span>Books</span>
					</a>

					<a href="{% url 'library_students' %}" class="flex items-center p-3 rounded-lg hover:bg-gray-800
   {% if request.resolver_match.url_name == 'library_students' %} active-nav-item  {% endif %}">
						<i class="fas fa-users mr-3"></i>
						<span>Members</span>
					</a>


				</ul>

				<!-- Section Divider -->
				<div class="px-3 mt-6 mb-2">
					<p class="text-xs uppercase text-gray-500 font-semibold">Tools</p>
				</div>

				<ul class="space-y-1 px-3">

					<li>
						<a href="#" class="flex items-center p-3 rounded-lg hover:bg-gray-800">
							<i class="fas fa-calendar-alt mr-3"></i>
							<span>Inventory</span>
						</a>
					</li>
					<li>
						<a href="#" class="flex items-center p-3 rounded-lg hover:bg-gray-800">
							<i class="fas fa-file-alt mr-3"></i>
							<span>Reports</span>
						</a>
					</li>

					<li>
						<a href="#" class="flex items-center p-3 rounded-lg hover:bg-gray-800">
							<i class="fas fa-envelope mr-3"></i>
							<span>Messages</span>
							<span
								class="ml-auto bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">3</span>
						</a>
					</li>
					<li>
						<a href="#" class="flex items-center p-3 rounded-lg hover:bg-gray-800">
							<i class="fas fa-cog mr-3"></i>
							<span>Settings</span>
						</a>
					</li>
				</ul>
			</div>

			<!-- Sidebar Footer -->
			<div class="p-4 border-t border-gray-700">

				{% if user.is_authenticated %}
				<form method="POST" action="{% url 'logout' %}">
					{% csrf_token %}

					<button class="flex items-center p-2 rounded-lg hover:bg-gray-800" type="submit">
						<i class="fas fa-sign-out-alt mr-3"></i>
						Logout
					</button>
				</form>
				{% endif %}

			</div>
		</div>

		<!-- Main Content -->
		<div class="content-transition flex-1 flex flex-col overflow-hidden">
			<!-- Top Bar -->
			<header class="bg-white shadow-sm z-10">
				<div class="flex items-center justify-between p-4">
					<div class="flex items-center">
						<button id="sidebarToggle" class="p-2 rounded-md text-gray-600 hover:bg-gray-100">
							<i class="fas fa-bars"></i>
						</button>
						<div class="ml-4 relative">
							<input type="text" placeholder="Search..."
								class="pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64">
							<i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
						</div>
					</div>

					<div class="flex items-center space-x-4">
						<button class="p-2 rounded-full hover:bg-gray-100 relative">
							<i class="fas fa-bell text-gray-600"></i>
							<span
								class="absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">5</span>
						</button>
						<button class="p-2 rounded-full hover:bg-gray-100">
							<i class="fas fa-cog text-gray-600"></i>
						</button>
						<div
							class="h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-medium">
							JD
						</div>
					</div>
				</div>
			</header>

			<!-- Page Content -->
			<main class="flex-1 overflow-y-auto p-6 bg-gray-50">
				<!-- Page Header -->

				{% block content %} {% endblock %}
			</main>
		</div>
	</div>

	<script>
		// Toggle sidebar on mobile
		document.getElementById('sidebarToggle').addEventListener('click', function () {
			const sidebar = document.querySelector('.sidebar-transition');
			const content = document.querySelector('.content-transition');

			if (sidebar.classList.contains('w-64')) {
				sidebar.classList.remove('w-64');
				sidebar.classList.add('w-0', 'overflow-hidden');
				content.classList.add('lg:ml-0');
			} else {
				sidebar.classList.remove('w-0', 'overflow-hidden');
				sidebar.classList.add('w-64');
				content.classList.remove('lg:ml-0');
			}
		});

		// Set active navigation item
		document.querySelectorAll('.sidebar-transition a').forEach(item => {
			item.addEventListener('click', function () {
				document.querySelectorAll('.sidebar-transition a').forEach(i => {
					i.classList.remove('active-nav-item');
				});
				this.classList.add('active-nav-item');
			});
		});
	</script>
</body>

</html>